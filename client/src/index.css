/* START OF REFACTORED index.css */

@tailwind base;
@tailwind components;
@tailwind utilities;

/* =========================
   GLOBAL & DEFAULT STYLES
   ========================= */

/* === Base Variables & Default Theme (Dark/Fallback) === */
:root {
  /* --- Base Layout & Color Palette (Defaults to Dark Theme) --- */
  --background: 240 10% 3.9%;
  --foreground: 0 0% 98%;
  --muted: 240 3.7% 15.9%;
  --muted-foreground: 240 5% 64.9%;
  --popover: 240 10% 3.9%;
  --popover-foreground: 0 0% 98%;
  --card: 240 10% 3.9%; /* Default card is dark */
  --card-foreground: 0 0% 98%; /* Default card text is light */
  --border: 240 3.7% 15.9%;
  --input: 240 3.7% 15.9%;
  --primary: 291 47% 42%;
  --primary-foreground: 0 0% 98%;
  --secondary: 225 73% 57%;
  --secondary-foreground: 0 0% 98%;
  --accent: 273 48% 45%;
  --accent-foreground: 0 0% 98%;
  --destructive: 0 62.8% 30.6%;
  --destructive-foreground: 0 0% 98%;
  --ring: 240 4.9% 83.9%;
  --radius: 0.5rem;

  /* --- Component-Specific Variables (Defaults) --- */
  --calendar-period-expected-bg: hsl(var(--card));
  --calendar-period-expected-fg: hsl(var(--card-foreground));
  --cycle-stats-text: var(--card-foreground);
  --cycle-stats-bar: var(--primary);

  /* --- Chart colors --- */
  --chart-1: 291 47% 42%;
  --chart-2: 225 73% 57%;
  --chart-3: 273 48% 45%;
  --chart-4: 263 67% 65%;
  --chart-5: 326 100% 74%;

  /* --- Other Base Variables --- */
  --indigo-bar: #6366f1;
  --sidebar-background: 240 10% 3.9%;
  --sidebar-foreground: 0 0% 98%;
  --sidebar-primary: 291 47% 42%;
  --sidebar-primary-foreground: 0 0% 98%;
  --sidebar-accent: 273 48% 45%;
  --sidebar-accent-foreground: 0 0% 98%;
  --sidebar-border: 240 3.7% 15.9%;
  --sidebar-ring: 240 4.9% 83.9%;
}

/* === Default Component Styles === */

/* Period Expected Box Default Style */
.bg-period-expected {
  background-color: var(--calendar-period-expected-bg, #fde8e8) !important;
  color: var(--calendar-period-expected-fg, #7f1d1d) !important;
}

/* Themeable Input Base Style */
.theme-input {
  background: hsl(var(--background));
  color: hsl(var(--foreground));
  border: 1.5px solid hsl(var(--border));
  transition: background 0.2s, color 0.2s, border-color 0.2s;
}
.theme-input::placeholder {
  color: hsl(var(--muted-foreground));
  opacity: 1;
}

/* Symptom Button Base Styles & Default Hover */
/* NOTE: .symptom-btn often refers to the INNER card/button element */
.symptom-btn {
  transition: box-shadow 0.2s, transform 0.2s, background-color 0.2s, border-color 0.2s;
  border-radius: var(--radius, 0.5rem);
  border: 1.5px solid transparent; /* Base transparent border for layout consistency */
}
/* Base hover for the inner card */
.symptom-btn:hover {
  transform: translateY(-1px);
  transition: transform 0.2s;
  /* Default hover has no background/shadow/border change - theme specific overrides */
  background: none;
  box-shadow: none;
  border-color: transparent; /* Keep transparent unless theme overrides */
  outline: none;
}
/* Explicitly remove hover effects for UNSELECTED buttons universally (inner card) */
/* This ensures themes MUST define unselected hover if they want one */
.symptom-btn:not(.selected):hover {
  background: none !important;
  border-color: transparent !important; /* Ensure no border unless specified by theme hover */
  outline: none !important;
  box-shadow: none !important;
  transform: translateY(-1px); /* Keep the subtle lift */
}
/* Default selected symptom button state (inner card) */
.symptom-btn.selected {
  /* Base themes define background, border, shadow */
  border-radius: var(--radius, 0.5rem) !important; /* Ensure radius */
}
/* Default selected symptom button hover (inner card) */
.symptom-btn.selected:hover {
    box-shadow: none; /* Base themes have no glow/shadow */
    transform: translateY(-1px);
    transition: box-shadow 0.3s ease, transform 0.2s ease, background-color 0.2s, border-color 0.2s;
    /* Theme specific background/border overrides this */
}

/* Outer Button Container Reset (Generic - Applies to all themes) */
/* This removes styles from the wrapper (e.g., .flex-1) */
[class*="theme-"] .symptom-btn.flex-1.selected, /* Adjust .flex-1 if outer container class differs */
[class*="theme-"] .symptom-btn.flex-1.selected:hover,
[class*="theme-"] .symptom-btn.flex-1.selected:focus {
  outline: none !important;
  border: none !important;
  background: none !important;
  box-shadow: none !important;
}


/* Symptom label base color */
.symptom-label {
  /* color: inherit !important; */
}
/* Intensity label base color */
.p-3.pt-2.pb-4.bg-card.border.border-t-0.border-primary\/50.rounded-b-lg .text-xs span {
  color: inherit !important;
}
span.text-xs.mr-2.px-1\.5.py-0\.5.bg-primary\/20.rounded {
  color: var(--foreground) !important;
}

/* Symptom Modal Item Base Styles */
.symptom-item {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  border-radius: 0.375rem; /* rounded-md */
  padding: 0.5rem 0.75rem; /* px-3 py-2 */
  transition-property: background-color, color, border-color, box-shadow;
  transition-duration: 300ms;
  transition-timing-function: ease-in-out;
  cursor: pointer;
  font-size: 0.875rem; /* text-xs */
  font-weight: 400; /* font-normal */
  background: none;
  color: hsl(var(--foreground));
  border: 1.5px solid transparent;
}
.symptom-item:hover {
  background-color: hsl(var(--accent) / 0.30);
  color: hsl(var(--foreground));
  font-weight: 500;
}
/* Base selected state */
.symptom-item.selected {
  background: hsl(var(--accent), 0.88);
  color: var(--accent-foreground, var(--foreground));
  border: 1.5px solid hsl(var(--accent));
  box-shadow: 0 1px 6px 0 hsl(var(--accent), 0.10);
}
.symptom-item input[type="checkbox"] {
  accent-color: hsl(var(--accent));
}

/* Calendar Day Base Styles */
.calendar-day {
  @apply aspect-square flex items-center justify-center text-sm rounded-full cursor-pointer transition-colors relative;
}
.calendar-day:not(.empty):hover {
  @apply bg-muted;
}
.calendar-day.period {
  @apply bg-red-400/90 border border-red-500 text-white font-medium;
}
.calendar-day.fertile {
  @apply bg-blue-400/90 border border-blue-500 text-white font-medium;
}
.calendar-day.today {
  @apply bg-primary text-white font-medium;
}
.calendar-day.empty {
  @apply text-gray-500;
}
.date-number {
  @apply inline-block text-foreground;
  opacity: 1 !important;
}
.calendar-day:not(.period):not(.fertile):not(.today) .date-number {
  @apply text-foreground;
}
.symptom-indicator {
  @apply w-3 h-3 rounded-full bg-accent absolute bottom-0.5;
  opacity: 0.9;
}
.spotting-indicator {
  @apply w-3 h-3 rounded-full bg-gray-400 absolute bottom-0.5 right-0.5;
  opacity: 0.9;
}

/* Phase Color Classes */
.phase-menstrual { @apply bg-red-400/90 text-white; }
.phase-follicular { @apply bg-yellow-400/90 text-white; }
.phase-ovulation { @apply bg-blue-400/90 text-white; }
.phase-luteal { @apply bg-purple-400/90 text-white; }

/* Button Flash Animation */
@keyframes flash-blue {
  0% { background-color: rgba(59, 130, 246, 0.2); }
  50% { background-color: rgba(59, 130, 246, 0.8); }
  100% { background-color: rgba(59, 130, 246, 0.2); }
}
.animate-flash-blue {
  animation: flash-blue 0.3s ease-in-out;
}

/* Bottom Navigation */
.bottom-nav-btn {
  @apply flex flex-col items-center py-3 px-5 text-muted-foreground;
}
.bottom-nav-btn.active {
  @apply text-primary;
}

/* Input & Slider Styles */
.input-container { @apply py-3; }
.input-container label { @apply mb-2 block; }
.slider-container { @apply w-full relative; }
input[type="range"] {
  @apply h-2 rounded-full appearance-none w-full bg-secondary outline-none;
  -webkit-appearance: none;
}
input[type="range"]::-webkit-slider-thumb {
  -webkit-appearance: none;
  @apply w-5 h-5 appearance-none bg-primary rounded-full cursor-pointer;
  border: 2px solid white;
  box-shadow: 0 0 2px rgba(0,0,0,0.2);
}
input[type="range"]::-moz-range-thumb {
  @apply w-5 h-5 appearance-none bg-primary rounded-full cursor-pointer;
  border: 2px solid white;
  box-shadow: 0 0 2px rgba(0,0,0,0.2);
}
input[type="range"]::-ms-thumb {
  @apply w-5 h-5 appearance-none bg-primary rounded-full cursor-pointer;
  border: 2px solid white;
  box-shadow: 0 0 2px rgba(0,0,0,0.2);
}

/* === Tailwind Base Layer === */
@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply font-sans antialiased bg-background text-foreground;
    -webkit-tap-highlight-color: transparent;
  }
  ::-webkit-scrollbar {
    @apply w-1.5 h-1.5;
  }
  ::-webkit-scrollbar-track {
    @apply bg-background;
  }
  ::-webkit-scrollbar-thumb {
    @apply bg-secondary rounded-sm;
  }
}

/* === Tailwind Utilities Layer === */
@layer utilities {
  .ripple {
    @apply relative overflow-hidden;
  }
  .ripple:after {
    @apply content-[''] block absolute w-full h-full top-0 left-0 pointer-events-none bg-no-repeat bg-center opacity-0 transition-all duration-300;
    background-image: radial-gradient(circle, #fff 10%, transparent 10.01%);
    transform: scale(10, 10);
  }
  .ripple:active:after {
    @apply transform scale-0 opacity-30 transition-none;
  }
}

/* === Generic Themeable Elements === */

/* Upcoming Event Boxes */
[class*="theme-"] .bg-primary.bg-opacity-10 {
  background-color: hsl(var(--primary) / 0.10) !important;
  border: 1px solid hsl(var(--primary) / 0.5) !important;
  border-left: 4px solid hsl(var(--primary)) !important;
  color: var(--foreground) !important;
}
[class*="theme-"] .bg-primary.bg-opacity-10 .font-medium,
[class*="theme-"] .bg-primary.bg-opacity-10 .text-sm,
[class*="theme-"] .bg-primary.bg-opacity-10 .text-xs {
  color: var(--foreground) !important;
}
/* Fertile window box */
.fertile-window-box {
   @apply rounded-lg text-card-foreground shadow-sm mt-8 mb-4 mx-auto max-w-2xl border border-l-4 border-primary p-4;
   background-color: hsl(var(--primary) / 0.10);
   border-color: hsl(var(--primary) / 0.5);
   border-left-color: hsl(var(--primary));
   color: var(--foreground);
}

/* Select Symptoms Popup Highlight (Default) */
.select-symptoms-popup .highlighted {
  background: hsl(var(--accent) / 0.5) !important;
  color: hsl(var(--accent-foreground)) !important;
}
/* Select Symptoms Popup Text Color (Default) */
.symptom-item:hover span,
.symptom-item.selected span {
  color: hsl(var(--foreground)) !important;
  background: none !important;
}

/* =========================
   THEME-SPECIFIC STYLES
   ========================= */

/* --- Theme: Starry --- */
.theme-starry {
  /* Variables */
  --background: 235 44% 12%;
  --foreground: 220 16% 90%;
  --muted: 245 32% 18%;
  --muted-foreground: 220 12% 70%;
  --popover: 238 38% 15%;
  --popover-foreground: 220 16% 90%;
  --card: 238 38% 15%;
  --card-foreground: 220 16% 90%;
  --border: 245 32% 18%;
  --input: 245 32% 18%;
  --primary: 263 67% 65%;
  --primary-foreground: 220 16% 90%;
  --secondary: 225 73% 57%;
  --secondary-foreground: 220 16% 90%;
  --accent: 326 100% 74%;
  --accent-foreground: 220 16% 90%;
  --destructive: 0 62.8% 30.6%;
  --destructive-foreground: 220 16% 90%;
  --ring: 263 67% 65%;
  --radius: 0.5rem;
  --calendar-period-expected-bg: hsl(var(--card));
  --calendar-period-expected-fg: hsl(var(--card-foreground));
  --cycle-stats-text: 270 100% 98%;
  --cycle-stats-bar: var(--primary);
  --theme-text: 220 16% 90%;
  /* Button Specific Vars */
  --button-selected-bg: hsl(var(--card));
  --button-selected-border: 1.5px solid hsl(var(--primary));
  --button-hover-bg: hsl(var(--muted) / 0.7); /* Use muted for hover */
  --button-hover-border-color: hsl(var(--primary) / 0.8);
}
/* Components */
.theme-starry .symptom-item:hover { background: hsl(var(--muted), 0.80); color: var(--accent-foreground, var(--foreground)); }
.theme-starry .symptom-item.selected { background: hsl(var(--accent), 0.82); color: var(--accent-foreground, var(--foreground)); border: 1.5px solid hsl(var(--accent)); }
/* --- Symptom Button Styling (Inner Card) --- */
/* Unselected symptom button hover (inner card) */
.theme-starry .symptom-btn:not(.selected):hover,
.theme-starry .symptom-btn:not(.selected):focus {
  background: var(--button-hover-bg) !important;
  border-color: hsl(var(--border)) !important; /* Show border on hover */
  box-shadow: none !important;
  outline: none !important;
}
/* Selected symptom button styles (inner card) */
.theme-starry .symptom-btn.selected {
    background: var(--button-selected-bg) !important;
    border: var(--button-selected-border) !important;
    box-shadow: none !important;
}
/* Selected symptom button hover/focus (inner card) */
.theme-starry .symptom-btn.selected:hover,
.theme-starry .symptom-btn.selected:focus {
  background: var(--button-hover-bg) !important;
  box-shadow: none !important;
  border-color: var(--button-hover-border-color) !important;
  transform: translateY(-1px);
}
/* Selected symptom label color */
.theme-starry .symptom-btn.selected .symptom-label {
  color: var(--primary-foreground, #d7e5ff) !important;
}
/* Theme name */
.theme-starry .theme-name { color: hsl(240 20% 85%) !important; }


/* --- Theme: Nebula --- */
.theme-nebula {
  /* Variables */
  --background: 270 70% 12%;
  --foreground: 270 30% 96%;
  --muted: 270 50% 18%;
  --muted-foreground: 270 20% 80%;
  --popover: 270 60% 15%;
  --popover-foreground: 270 30% 96%;
  --card: 270 60% 15%;
  --card-foreground: 270 30% 96%;
  --border: 270 40% 25%;
  --input: 270 40% 25%;
  --primary: 290 100% 70%;
  --primary-foreground: 270 30% 96%;
  --secondary: 200 100% 70%;
  --secondary-foreground: 270 30% 96%;
  --accent: 320 100% 70%;
  --accent-foreground: 270 30% 96%;
  --destructive: 0 70% 60%;
  --destructive-foreground: 270 30% 96%;
  --ring: 290 100% 70%;
  --radius: 0.5rem;
  --calendar-period-expected-bg: hsl(var(--card));
  --calendar-period-expected-fg: hsl(var(--card-foreground));
  --cycle-stats-text: 260 100% 96%;
  --cycle-stats-bar: var(--primary);
  --theme-text: 270 30% 96%;
  /* Button Specific Vars */
  --button-selected-bg: hsl(var(--card));
  --button-selected-border: 1.5px solid hsl(var(--primary));
  --button-hover-bg: hsl(var(--muted) / 0.7);
  --button-hover-border-color: hsl(var(--primary) / 0.8);
}
/* Components */
.theme-nebula .symptom-item:hover { background: hsl(var(--muted), 0.80); color: var(--accent-foreground, var(--foreground)); }
.theme-nebula .symptom-item.selected { background: hsl(var(--accent), 0.82); color: var(--accent-foreground, var(--foreground)); border: 1.5px solid hsl(var(--accent)); }
/* --- Symptom Button Styling (Inner Card) --- */
/* Unselected symptom button hover (inner card) */
.theme-nebula .symptom-btn:not(.selected):hover,
.theme-nebula .symptom-btn:not(.selected):focus {
  background: var(--button-hover-bg) !important;
  border-color: hsl(var(--border)) !important;
  box-shadow: none !important;
  outline: none !important;
}
/* Selected symptom button styles (inner card) */
.theme-nebula .symptom-btn.selected {
    background: var(--button-selected-bg) !important;
    border: var(--button-selected-border) !important;
    box-shadow: none !important;
}
/* Selected symptom button hover (inner card) */
.theme-nebula .symptom-btn.selected:hover,
.theme-nebula .symptom-btn.selected:focus {
  background: var(--button-hover-bg) !important;
  box-shadow: none !important;
  border-color: var(--button-hover-border-color) !important;
  transform: translateY(-1px);
}
/* Selected symptom label color */
.theme-nebula .symptom-btn.selected .symptom-label {
  color: var(--primary-foreground, #f5eaff) !important;
}
/* Theme name */
.theme-nebula .theme-name { color: hsl(270 30% 96%) !important; }


/* --- Theme: Pinkwhite --- */
.theme-pinkwhite {
  /* Variables */
  --card: 0 0% 100%;
  --card-foreground: 340 20% 20%;
  --calendar-period-expected-bg: #fde8e8;
  --calendar-period-expected-fg: #7f1d1d;
  --background: 330 60% 98%;
  --foreground: 340 40% 12%;
  --muted: 330 40% 96%;
  --muted-foreground: 340 30% 30%;
  --popover: 330 40% 97%;
  --popover-foreground: 340 40% 12%;
  --border: 340 30% 85%;
  --input: 340 30% 85%;
  --primary: 340 70% 60%; /* H S L */
  --primary-foreground: 330 60% 98%;
  --secondary: 340 80% 85%;
  --secondary-foreground: 340 40% 20%;
  --accent: 340 60% 55%;
  --accent-foreground: 330 60% 98%;
  --destructive: 0 70% 50%;
  --destructive-foreground: 330 60% 98%;
  --ring: 340 70% 65%;
  --radius: 0.5rem;
  --cycle-stats-text: 340 20% 20%;
  --cycle-stats-bar: 340 70% 60%;
  --theme-text: 330 40% 10%;
  /* Button Specific Vars */
  --button-selected-border: 1.5px solid hsl(var(--primary) / 0.8);
  --button-hover-bg: hsl(var(--primary) / 0.8); /* Lighter primary for hover */
  --button-hover-border-color: hsl(var(--primary));
  --button-unselected-hover-bg: hsl(var(--muted)); /* Subtle grey-pink */
  --button-unselected-hover-border: 1.5px solid hsl(var(--border));
}
/* Components */
.theme-pinkwhite .bg-period-expected { background-color: var(--calendar-period-expected-bg) !important; color: var(--calendar-period-expected-fg) !important; }
.theme-pinkwhite .symptom-item { color: var(--foreground); }
.theme-pinkwhite .symptom-item:hover { background: hsl(340 60% 90%); color: var(--foreground); }
.theme-pinkwhite .symptom-item.selected { background: hsl(var(--accent), 0.92); color: var(--accent-foreground, var(--foreground)); border: 1.5px solid hsl(var(--accent)); }
/* --- Symptom Button Styling (Inner Card) --- */
.theme-pinkwhite .symptom-btn:not(.selected):hover,
.theme-pinkwhite .symptom-btn:not(.selected):focus {
  background: var(--button-unselected-hover-bg) !important;
  border: var(--button-unselected-hover-border) !important;
  box-shadow: none !important;
  outline: none !important;
}
.theme-pinkwhite .symptom-btn.selected {
  /* MODIFICATION: Removed explicit background-color rule based on testing */
  /* background-color: hsla(var(--primary), 0.9) !important; */ /* <-- REMOVED */
  border: var(--button-selected-border) !important; /* Border for selected state */
  box-shadow: none !important;
  /* Text color likely inherited or set by label rule below */
}
.theme-pinkwhite .symptom-btn.selected:hover,
.theme-pinkwhite .symptom-btn.selected:focus {
   background: var(--button-hover-bg) !important; /* Hover uses its specific background */
   border-color: var(--button-hover-border-color) !important;
   box-shadow: none !important;
   transform: translateY(-1px);
}
.theme-pinkwhite .symptom-btn.selected .symptom-label {
  /* This rule becomes more important now for text color */
  color: var(--primary-foreground, #fff) !important;
}
/* ... (rest of Pinkwhite theme styles remain the same) ... */
.theme-pinkwhite .theme-name, .theme-name[data-theme="pinkwhite"] { color: hsl(var(--theme-text, 330 40% 10%)) !important; }
.theme-pinkwhite .select-symptoms-popup .highlighted { background: #e9cfa3 !important; color: #2d1a05 !important; }
.theme-pinkwhite .symptom-item:hover span, .theme-pinkwhite .symptom-item.selected span { color: #2d1a05 !important; }

/* --- Theme: Beach --- */
.theme-beach {
  /* Variables */
  --background: 190 60% 95%;
  --foreground: 190 50% 20%;
  --muted: 190 40% 90%;
  --muted-foreground: 190 30% 40%;
  --popover: 190 40% 98%;
  --popover-foreground: 190 50% 20%;
  --card: 190 40% 98%;
  --card-foreground: 190 50% 20%;
  --border: 40 30% 80%;
  --input: 40 30% 80%;
  --primary: 190 80% 50%; /* H S L */
  --primary-foreground: 190 60% 98%;
  --secondary: 40 90% 85%;
  --secondary-foreground: 190 50% 20%;
  --accent: 50 100% 70%;
  --accent-foreground: 190 50% 20%;
  --destructive: 0 70% 40%;
  --destructive-foreground: 190 60% 98%;
  --ring: 40 90% 70%;
  --radius: 0.5rem;
  --calendar-period-expected-bg: hsl(var(--card));
  --calendar-period-expected-fg: hsl(var(--card-foreground));
  --cycle-stats-text: 190 50% 20%;
  --cycle-stats-bar: var(--primary);
  --scrollbar-thumb: 50 100% 70% / 0.35;
  --scrollbar-thumb-hover: 50 100% 70% / 0.6;
  --theme-text: 190 50% 20%;
  /* Button Specific Vars */
  --button-focus-bg: rgb(251, 228, 182);
  --button-focus-text: #2d1a05;
  --button-focus-shadow: 0 0 5px 1px rgb(251 228 182 / 0.7);
  --button-focus-outline: 1.5px solid #e9cfa3;
  /* Removed --button-selected-bg */
  --button-selected-border: 1.5px solid hsl(var(--primary) / 0.8);
  --button-hover-bg: hsl(var(--primary) / 0.9);
  --button-hover-border-color: hsl(var(--primary));
}
/* Components */
.theme-beach ::-webkit-scrollbar-thumb { background: hsla(var(--scrollbar-thumb)); }
.theme-beach ::-webkit-scrollbar-thumb:hover { background: hsla(var(--scrollbar-thumb-hover)); }
/* --- Symptom Button Styling (Inner Card) --- */
.theme-beach .symptom-btn:not(.selected):hover,
.theme-beach .symptom-btn:not(.selected):focus {
  background: var(--button-focus-bg) !important;
  color: var(--button-focus-text) !important;
  border: var(--button-focus-outline) !important;
  box-shadow: var(--button-focus-shadow) !important;
  outline: none !important;
}
.theme-beach .symptom-btn.selected {
  /* MODIFICATION: Removed explicit background-color rule based on testing */
  /* background-color: hsla(var(--primary), 0.9) !important; */ /* <-- REMOVED / COMMENTED */
  border: var(--button-selected-border) !important; /* Border for selected state */
  box-shadow: none !important;
  /* Text color likely inherited or set by label rule */
}
.theme-beach .symptom-btn.selected:hover,
.theme-beach .symptom-btn.selected:focus {
  background: var(--button-hover-bg) !important; /* Hover stays fully opaque or slightly lighter opaque */
  border-color: var(--button-hover-border-color) !important;
  box-shadow: var(--button-focus-shadow) !important;
  border: var(--button-focus-outline) !important;
  transform: translateY(-1px);
  outline: none !important;
}
.theme-beach .symptom-btn.selected .symptom-label {
  color: var(--primary-foreground, #fff) !important;
}
.theme-beach .theme-name, .theme-name[data-theme="beach"] { color: #17404e !important; }
.theme-beach .select-symptoms-popup .highlighted { background: #e9cfa3 !important; color: #2d1a05 !important; }
.theme-beach .symptom-item:hover span, .theme-beach .symptom-item.selected span { color: #2d1a05 !important; }


/* --- Theme: Ocean --- */
.theme-ocean {
  /* Variables */
  --background: 200 70% 14%;
  --foreground: 190 60% 96%;
  --muted: 200 40% 18%;
  --muted-foreground: 190 30% 80%;
  --popover: 200 60% 16%;
  --popover-foreground: 190 60% 96%;
  --card: 200 60% 16%;
  --card-foreground: 190 60% 96%;
  --border: 200 40% 18%;
  --input: 200 40% 18%;
  --primary: 190 80% 50%; /* H S L */
  --primary-foreground: 190 60% 98%;
  --secondary: 40 90% 85%;
  --secondary-foreground: 190 70% 14%;
  --accent: 190 100% 70%;
  --accent-foreground: 190 60% 96%;
  --destructive: 0 70% 40%;
  --destructive-foreground: 190 60% 98%;
  --ring: 190 80% 50%;
  --radius: 0.5rem;
  --calendar-period-expected-bg: hsl(var(--card));
  --calendar-period-expected-fg: hsl(var(--card-foreground));
  --cycle-stats-text: var(--primary-foreground);
  --cycle-stats-bar: var(--primary);
  --theme-text: 190 60% 96%;
  /* Button Specific Vars */
  /* Removed --button-selected-bg */
  --button-selected-border: 1.5px solid hsl(var(--primary) / 0.8);
  --button-hover-bg: hsl(var(--primary) / 0.9);
  --button-hover-border-color: hsl(var(--primary));
  --button-unselected-hover-bg: hsl(var(--muted) / 0.7);
  --button-unselected-hover-border: 1.5px solid hsl(var(--border));
  --glow: none;
  --glow-color: transparent;
}
/* Components */
.theme-ocean .bg-period-expected, .theme-ocean [class*="bg-period-expected"] { background-color: hsl(var(--card)) !important; color: hsl(var(--card-foreground)) !important; }
/* --- Symptom Button Styling (Inner Card) --- */
.theme-ocean .symptom-btn:not(.selected):hover,
.theme-ocean .symptom-btn:not(.selected):focus {
  background: var(--button-unselected-hover-bg) !important;
  border: var(--button-unselected-hover-border) !important;
  box-shadow: none !important;
  outline: none !important;
}
.theme-ocean .symptom-btn.selected {
  /* MODIFICATION: Removed explicit background-color rule based on testing */
  /* background-color: hsla(var(--primary), 0.9) !important; */ /* <-- REMOVED / COMMENTED */
  border: var(--button-selected-border) !important; /* Border for selected state */
  box-shadow: none !important;
  /* Text color likely inherited or set by label rule */
}
.theme-ocean .symptom-btn.selected:hover,
.theme-ocean .symptom-btn.selected:focus {
  background: var(--button-hover-bg) !important; /* Hover stays fully opaque or slightly lighter opaque */
  border-color: var(--button-hover-border-color) !important;
  box-shadow: none !important;
  transform: translateY(-1px);
}
.theme-ocean .symptom-btn .symptom-label { color: var(--foreground, #f1f8fa) !important; }
.theme-ocean .symptom-btn.selected .symptom-label { color: var(--primary-foreground, #fff) !important; }
.theme-ocean .bg-primary.bg-opacity-10 { background-color: hsl(var(--primary) / 0.10) !important; border-color: hsl(var(--primary)) !important; color: var(--foreground, #f1f8fa) !important; }
.theme-ocean .upcoming-box, .theme-ocean .bg-primary.bg-opacity-10 * { color: var(--foreground, #f1f8fa) !important; }
.theme-ocean .fertile-window-box { background-color: hsl(190, 66%, 18%) !important; color: hsl(190, 60%, 96%) !important; border: 1px solid hsl(190, 80%, 30%) !important; border-left: 4px solid hsl(190, 80%, 50%) !important; }



/* --- Theme: Galaxy --- */
.theme-galaxy {
  /* Variables */
  --background: 260 60% 13%;
  --foreground: 230 20% 96%;
  --muted: 260 40% 20%;
  --muted-foreground: 230 12% 85%;
  --popover: 260 50% 17%;
  --popover-foreground: 230 20% 96%;
  --card: 260 50% 17%;
  --card-foreground: 230 20% 96%;
  --border: 260 40% 20%;
  --input: 260 40% 20%;
  --primary: 290 100% 70%;
  --primary-foreground: 230 20% 96%;
  --secondary: 200 100% 70%;
  --secondary-foreground: 230 20% 96%;
  --accent: 320 100% 70%;
  --accent-foreground: 230 20% 96%;
  --destructive: 0 70% 60%;
  --destructive-foreground: 230 20% 96%;
  --ring: 290 100% 70%;
  --radius: 0.5rem;
  --calendar-period-expected-bg: hsl(var(--card));
  --calendar-period-expected-fg: hsl(var(--card-foreground));
  --cycle-stats-text: var(--primary-foreground);
  --cycle-stats-bar: var(--primary);
  --theme-text: 230 20% 96%;
  /* Button Specific Vars */
  --button-selected-bg: hsl(var(--card));
  --button-selected-border: 1.5px solid hsl(var(--primary));
  --button-hover-bg: hsl(var(--muted) / 0.7);
  --button-hover-border-color: hsl(var(--primary) / 0.8);
}
/* Components */
/* --- Symptom Button Styling (Inner Card) --- */
/* Unselected symptom button hover (inner card) */
.theme-galaxy .symptom-btn:not(.selected):hover,
.theme-galaxy .symptom-btn:not(.selected):focus {
  background: var(--button-hover-bg) !important;
  border-color: hsl(var(--border)) !important;
  box-shadow: none !important;
  outline: none !important;
}
/* Selected symptom button styles (inner card) */
.theme-galaxy .symptom-btn.selected {
    background: var(--button-selected-bg) !important;
    border: var(--button-selected-border) !important;
    box-shadow: none !important;
}
/* Selected symptom button hover (inner card) */
.theme-galaxy .symptom-btn.selected:hover,
.theme-galaxy .symptom-btn.selected:focus {
  background: var(--button-hover-bg) !important;
  box-shadow: none !important;
  border-color: var(--button-hover-border-color) !important;
  transform: translateY(-1px);
}
/* Selected symptom label color */
.theme-galaxy .symptom-btn.selected .symptom-label {
  color: var(--primary-foreground, #fff) !important;
}
/* Theme name */
.theme-galaxy .theme-name { color: hsl(var(--theme-text)) !important; }
/* Fertile Window Box Override */
.theme-galaxy .fertile-window-box { background-color: hsl(200, 100%, 18%) !important; color: hsl(230, 20%, 96%) !important; border: 1px solid hsl(200, 100%, 40%) !important; border-left: 4px solid hsl(200, 100%, 70%) !important; }


/* --- Theme: Aurora --- */
.theme-aurora {
  /* Variables */
  --background: 160 60% 15%;
  --foreground: 120 20% 98%;
  --muted: 160 40% 23%;
  --muted-foreground: 120 12% 85%;
  --popover: 160 50% 18%;
  --popover-foreground: 120 20% 98%;
  --card: 160 50% 18%;
  --card-foreground: 120 20% 98%;
  --border: 160 40% 23%;
  --input: 160 40% 23%;
  --primary: 190 100% 70%;
  --primary-foreground: 120 20% 98%;
  --secondary: 300 100% 70%;
  --secondary-foreground: 120 20% 98%;
  --accent: 210 100% 70%;
  --accent-foreground: 120 20% 98%;
  --destructive: 0 70% 60%;
  --destructive-foreground: 120 20% 98%;
  --ring: 190 100% 70%;
  --radius: 0.5rem;
  --calendar-period-expected-bg: hsl(var(--card));
  --calendar-period-expected-fg: hsl(var(--card-foreground));
  --cycle-stats-text: var(--primary-foreground);
  --cycle-stats-bar: var(--primary);
  --theme-text: 120 20% 98%;
  /* Button Specific Vars */
  --button-selected-bg: hsl(var(--card));
  --button-selected-border: 1.5px solid hsl(var(--primary));
  --button-hover-bg: hsl(var(--accent) / 0.7); /* Use accent for hover */
  --button-hover-border-color: hsl(var(--primary) / 0.8);
}
/* Components */
/* --- Symptom Button Styling (Inner Card) --- */
/* Unselected symptom button hover (inner card) */
.theme-aurora .symptom-btn:not(.selected):hover,
.theme-aurora .symptom-btn:not(.selected):focus {
  background: var(--button-hover-bg) !important;
  border-color: hsl(var(--border)) !important;
  box-shadow: none !important;
  outline: none !important;
}
/* Selected symptom button styles (inner card) */
.theme-aurora .symptom-btn.selected {
    background: var(--button-selected-bg) !important;
    border: var(--button-selected-border) !important;
    box-shadow: none !important;
}
/* Selected symptom button hover (inner card) */
.theme-aurora .symptom-btn.selected:hover,
.theme-aurora .symptom-btn.selected:focus {
  background: var(--button-hover-bg) !important;
  box-shadow: none !important;
  border-color: var(--button-hover-border-color) !important;
  transform: translateY(-1px);
}
/* Selected symptom label color */
.theme-aurora .symptom-btn.selected .symptom-label {
  color: var(--primary-foreground, #fff) !important;
}
/* Theme name */
.theme-aurora .theme-name { color: hsl(var(--theme-text)) !important; }
/* Fertile Window Box Override */
.theme-aurora .fertile-window-box { background-color: hsl(160, 60%, 22%) !important; color: hsl(120, 20%, 98%) !important; border: 1px solid hsl(160, 40%, 40%) !important; border-left: 4px solid hsl(160, 100%, 70%) !important; }


/* --- Theme: Cyberpunk --- */
/* ... (Keep Cyberpunk as it was, it's a glow theme) ... */
.theme-cyberpunk {
  /* Variables */
  --background: 280 100% 8%; /* deep violet/blue */
  --foreground: 160 100% 70%; /* neon green/cyan */
  --muted: 280 80% 18%;
  --muted-foreground: 160 80% 70%;
  --popover: 280 100% 12%;
  --popover-foreground: 160 100% 70%;
  --card: 280 100% 12%;
  --card-foreground: 160 100% 70%;
  --border: 200 100% 60%; /* neon blue border */
  --input: 160 100% 70%; /* Text color for input */
  --input-bg: 280 90% 15%; /* Slightly different input background */
  --primary: 200 100% 60%; /* neon blue */
  --primary-foreground: 280 100% 8%; /* Dark text on primary */
  --secondary: 160 100% 70%; /* neon green/cyan */
  --secondary-foreground: 160 100% 10%; /* Dark text on secondary */
  --accent: 200 100% 70%; /* blue accent */
  --accent-foreground: 160 100% 70%; /* Neon text on accent */
  --destructive: 0 100% 60%;
  --destructive-foreground: 160 100% 70%;
  --ring: 200 100% 60%;
  --radius: 0.5rem;
  --glow-color: #00fff7; /* Specific glow color */
  --glow: 0 0 8px var(--glow-color), 0 0 16px var(--glow-color), 0 0 24px var(--glow-color); /* Combined glow */
  --glow-hover: 0 0 4px hsl(var(--accent)), 0 0 8px hsl(var(--accent) / 0.6), 0 0 8px 1px var(--glow-color); /* Adjusted hover glow */
  --calendar-period-expected-bg: hsl(var(--card));
  --calendar-period-expected-fg: hsl(var(--card-foreground));
  --cycle-stats-text: 190 100% 98%; /* light cyan for cyberpunk */
  --cycle-stats-bar: var(--primary);
  --theme-text: 160 100% 70%;
  /* Button Specific Vars */
  --button-selected-bg: hsl(var(--card)); /* Selected background is card */
  --button-selected-border: 1.5px solid hsl(var(--accent));
  --button-hover-bg: hsl(var(--muted) / 0.5);
  --button-hover-border-color: hsl(var(--primary));
}
/* Components */
/* Unselected symptom button hover/focus (inner card) - Keep default (no bg/border/shadow) */
/* Selected symptom button styles (inner card) */
.theme-cyberpunk .symptom-btn.selected {
  background: var(--button-selected-bg) !important;
  border: var(--button-selected-border) !important;
  box-shadow: var(--glow) !important; /* Apply glow */
  overflow: hidden !important; /* Contain glow */
}
/* Selected symptom button hover/focus (inner card) */
.theme-cyberpunk .symptom-btn.selected:hover,
.theme-cyberpunk .symptom-btn.selected:focus {
    background: var(--button-hover-bg) !important;
    box-shadow: var(--glow-hover) !important; /* Apply hover glow */
    border-color: var(--button-hover-border-color) !important;
    transform: translateY(-1px);
    transition: box-shadow 0.3s ease, transform 0.2s ease, background-color 0.2s, border-color 0.2s;
    overflow: hidden !important;
}
/* Selected symptom label color and glow */
.theme-cyberpunk .symptom-btn.selected .symptom-label {
  color: var(--foreground, #00fff7) !important; /* Use theme foreground */
  text-shadow: 0 0 4px var(--glow-color), 0 0 8px var(--glow-color); /* Add text shadow */
}
/* Fertile Window Box Override for Cyberpunk */
.theme-cyberpunk .fertile-window-box { background-color: hsl(200, 100%, 16%) !important; color: #00fff7 !important; border: 1px solid hsl(200, 100%, 40%) !important; border-left: 4px solid #00fff7 !important; box-shadow: 0 0 8px 1px #00fff7 inset, 0 0 12px 2px #0099ff; }


/* --- Theme: Synthwave --- */
/* ... (Keep Synthwave as it was, it's a glow theme) ... */
.theme-synthwave {
  /* Variables */
  --background: 260 90% 12%; /* deep blue/purple */
  --foreground: 52 100% 70%; /* neon yellow */
  --muted: 260 70% 22%;
  --muted-foreground: 320 100% 70%; /* neon magenta */
  --popover: 260 90% 16%;
  --popover-foreground: 52 100% 70%;
  --card: 260 90% 16%;
  --card-foreground: 52 100% 70%;
  --border: 320 100% 70%; /* neon magenta border */
  --input: 52 100% 70%; /* Text color for input */
  --input-bg: 260 80% 18%; /* Slightly different input background */
  --primary: 320 100% 70%; /* neon magenta */
  --primary-foreground: 260 90% 12%; /* Dark text on primary */
  --secondary: 200 100% 60%; /* neon blue */
  --secondary-foreground: 52 100% 70%; /* Neon text on secondary */
  --accent: 52 100% 70%; /* neon yellow accent */
  --accent-foreground: 320 100% 70%; /* Neon magenta text on accent */
  --destructive: 0 100% 60%;
  --destructive-foreground: 52 100% 70%;
  --ring: 320 100% 70%;
  --radius: 0.5rem;
  --glow-color: #ff5efc; /* Specific glow color (magenta) */
  --glow: 0 0 8px var(--glow-color), 0 0 16px var(--glow-color), 0 0 24px var(--glow-color); /* Combined glow */
  --glow-hover: 0 0 4px hsl(var(--accent)), 0 0 8px hsl(var(--accent) / 0.6), 0 0 8px 1px var(--glow-color); /* Adjusted hover glow */
  --calendar-period-expected-bg: hsl(var(--card));
  --calendar-period-expected-fg: hsl(var(--card-foreground));
  --cycle-stats-text: 320 100% 98%; /* light magenta for synthwave */
  --cycle-stats-bar: var(--primary);
  --theme-text: 52 100% 70%;
  /* Button Specific Vars */
  --button-selected-bg: hsl(var(--card)); /* Selected background is card */
  --button-selected-border: 1.5px solid hsl(var(--accent)); /* Accent border */
  --button-hover-bg: hsl(var(--muted) / 0.5);
  --button-hover-border-color: hsl(var(--primary)); /* Primary border on hover */
}
/* Components */
/* Unselected symptom button hover/focus (inner card) - Keep default (no bg/border/shadow) */
/* Selected symptom button styles (inner card) */
.theme-synthwave .symptom-btn.selected {
  background: var(--button-selected-bg) !important;
  border: var(--button-selected-border) !important;
  box-shadow: var(--glow) !important; /* Apply glow */
  overflow: hidden !important; /* Contain glow */
}
/* Selected symptom button hover/focus (inner card) */
.theme-synthwave .symptom-btn.selected:hover,
.theme-synthwave .symptom-btn.selected:focus {
    background: var(--button-hover-bg) !important;
    box-shadow: var(--glow-hover) !important; /* Apply hover glow */
    border-color: var(--button-hover-border-color) !important;
    transform: translateY(-1px);
    transition: box-shadow 0.3s ease, transform 0.2s ease, background-color 0.2s, border-color 0.2s;
    overflow: hidden !important;
}
/* Selected symptom label color and glow */
.theme-synthwave .symptom-btn.selected .symptom-label {
  color: var(--foreground, #ffe600) !important; /* Use theme foreground */
  text-shadow: 0 0 4px var(--glow-color), 0 0 8px var(--glow-color); /* Add text shadow */
}


/* --- Theme: Lunar --- */
/* ... (Keep Lunar as it was, it's a glow theme) ... */
.theme-lunar {
  /* Variables */
  --background: 220 18% 16%;   /* deep midnight blue */
  --foreground: 220 30% 96%;   /* moonlit white */
  --muted: 220 16% 22%;
  --muted-foreground: 220 18% 80%;
  --popover: 220 20% 18%;
  --popover-foreground: 220 30% 96%;
  --card: 220 20% 20%;
  --card-foreground: 220 30% 96%;
  --border: 220 10% 40%;
  --input: 220 10% 40%;
  --primary: 60 30% 90%;   /* pale moon yellow */
  --primary-foreground: 220 18% 16%; /* Dark text on primary */
  --secondary: 220 18% 36%; /* moon shadow blue */
  --secondary-foreground: 220 30% 96%;
  --accent: 240 60% 80%;   /* soft blue accent */
  --accent-foreground: 220 30% 96%;
  --destructive: 0 70% 60%;
  --destructive-foreground: 220 30% 96%;
  --ring: 60 30% 90%;
  --radius: 0.5rem;
  --glow-color: #aee9ff; /* Specific glow color (soft blue) */
  --glow-secondary: #eae6c4; /* Secondary pale yellow glow */
  --glow: 0 0 6px var(--glow-color), 0 0 12px var(--glow-color), 0 0 18px var(--glow-secondary); /* Subtle glow */
  --glow-hover: 0 0 4px hsl(var(--accent)), 0 0 8px hsl(var(--accent) / 0.6), 0 0 8px 1px var(--glow-color); /* Adjusted hover glow */
  --calendar-period-expected-bg: hsl(var(--card));
  --calendar-period-expected-fg: hsl(var(--card-foreground));
  --cycle-stats-text: 240 60% 80%; /* lighter purple for lunar stats text */
  --cycle-stats-bar: var(--primary);
  --theme-text: 220 30% 96%;
  /* Button Specific Vars */
  --button-selected-bg: hsl(var(--card)); /* Selected background is card */
  --button-selected-border: 1.5px solid hsl(var(--accent)); /* Accent border */
  --button-hover-bg: hsl(var(--muted) / 0.5);
  --button-hover-border-color: hsl(var(--primary)); /* Primary border on hover */
}
/* Components */
/* Unselected symptom button hover/focus (inner card) - Keep default (no bg/border/shadow) */
/* Selected symptom button styles (inner card) */
.theme-lunar .symptom-btn.selected {
  background: var(--button-selected-bg) !important;
  border: var(--button-selected-border) !important;
  box-shadow: var(--glow) !important; /* Apply glow */
  overflow: hidden !important; /* Contain glow */
}
/* Selected symptom button hover/focus (inner card) */
.theme-lunar .symptom-btn.selected:hover,
.theme-lunar .symptom-btn.selected:focus {
    background: var(--button-hover-bg) !important;
    box-shadow: var(--glow-hover) !important; /* Apply hover glow */
    border-color: var(--button-hover-border-color) !important;
    transform: translateY(-1px);
    transition: box-shadow 0.3s ease, transform 0.2s ease, background-color 0.2s, border-color 0.2s;
    overflow: hidden !important;
}
/* Selected symptom label color and glow */
.theme-lunar .symptom-btn.selected .symptom-label {
  color: var(--foreground, #eae6c4) !important; /* Use theme foreground */
  text-shadow: 0 0 4px var(--glow-color), 0 0 8px var(--glow-secondary); /* Add text shadow */
}
.theme-lunar .period-status-label {
  /* color: hsl(var(--foreground)) !important; */
  color: #41473c !important; /* Hardcoded dark color for testing */
}

/* --- Theme: Moon --- */
.theme-moon {
  /* Variables */
  --background: 220 18% 16%;
  --foreground: 220 30% 96%;
  --muted: 220 16% 22%;
  --muted-foreground: 220 18% 80%;
  --popover: 220 20% 18%;
  --popover-foreground: 220 30% 96%;
  --card: 220 18% 18%;
  --card-foreground: 220 30% 96%;
  --border: 220 18% 22%;
  --input: 220 18% 22%;
  --primary: 60 30% 90%; /* H S L */
  --primary-foreground: 220 18% 16%;
  --secondary: 220 18% 36%;
  --secondary-foreground: 220 30% 96%;
  --accent: 240 60% 80%;
  --accent-foreground: 220 30% 96%;
  --destructive: 0 70% 60%;
  --destructive-foreground: 220 30% 96%;
  --ring: 60 30% 90%;
  --radius: 0.5rem;
  --calendar-period-expected-bg: hsl(var(--card));
  --calendar-period-expected-fg: hsl(var(--card-foreground));
  --cycle-stats-text: 240 60% 80%;
  --cycle-stats-bar: var(--primary);
  --theme-text: 220 30% 96%;
  /* Button Specific Vars */
  --button-selected-border: 1.5px solid hsl(var(--primary) / 0.8);
  --button-hover-bg: hsl(var(--primary) / 0.9); /* Background for selected hover */
  --button-hover-border-color: hsl(var(--primary));
  --text-selected-dark: #23263a;
  --unselected-label-color: hsl(220deg 11.07% 69.18%);
  --glow: none;
  --glow-color: transparent;
}
/* Components */
/* --- Symptom Button Styling (Inner Card) --- */
.theme-moon .symptom-btn:not(.selected) .symptom-label {
  color: var(--unselected-label-color) !important;
}
.theme-moon .symptom-btn:not(.selected):hover,
.theme-moon .symptom-btn:not(.selected):focus {
   /* Optional: Add subtle border on hover */
   /* border-color: rgba(234, 230, 196, 0.5) !important; */
}
.theme-moon .symptom-btn.selected {
  /* MODIFICATION: Removed explicit background-color rule based on testing */
  /* background-color: hsla(var(--primary), 0.9) !important; */ /* <-- REMOVED */
  color: var(--text-selected-dark) !important; /* Text color for selected state */
  border: var(--button-selected-border) !important; /* Border for selected state */
  box-shadow: none !important;
}
.theme-moon .symptom-btn.selected:hover,
.theme-moon .symptom-btn.selected:focus {
  background: var(--button-hover-bg) !important; /* Hover uses its specific background */
  border-color: var(--button-hover-border-color) !important;
  box-shadow: none !important;
  transform: translateY(-1px);
}
.theme-moon .symptom-btn.selected .symptom-label {
  color: var(--primary-foreground, var(--text-selected-dark)) !important;
}
/* ... (rest of Moon theme styles remain the same) ... */
.theme-moon .period-status-btn.selected .symptom-label,
.theme-moon .period-status-btn.selected .period-status-label {
  color: var(--text-selected-dark) !important;
}
.theme-moon .cervical-mucus-btn.selected,
.theme-moon .cervical-mucus-btn.selected span {
  color: var(--text-selected-dark) !important;
}
.theme-moon .symptom-intensity-label svg,
.theme-moon svg.symptom-intensity-label {
  background: none !important; color: var(--foreground, #eae6c4) !important; fill: none !important; border-radius: 0 !important; padding: 0 !important; box-shadow: none !important;
}
/* Inside .theme-moon block */
.theme-moon .period-status-label {
/* color: var(--primary-foreground) !important; */
  color: #41473c !important; /* Hardcoded dark color for testing */
}

/* --- Theme: Dark (Legacy/Fallback) --- */
/* Relies on :root defaults and global styles */
.theme-dark {
  /* Define button vars if needed to override :root defaults */
  --button-selected-bg: hsl(var(--card));
  --button-selected-border: 1.5px solid hsl(var(--primary));
  --button-hover-bg: hsl(var(--muted) / 0.7);
  --button-hover-border-color: hsl(var(--primary) / 0.8);
  --button-unselected-hover-bg: hsl(var(--muted) / 0.5);
  --button-unselected-hover-border: 1.5px solid hsl(var(--border));
}
/* --- Symptom Button Styling (Inner Card) --- */
/* Unselected symptom button hover (inner card) */
.theme-dark .symptom-btn:not(.selected):hover,
.theme-dark .symptom-btn:not(.selected):focus {
  background: var(--button-unselected-hover-bg) !important;
  border: var(--button-unselected-hover-border) !important;
  box-shadow: none !important;
  outline: none !important;
}
/* Selected symptom button styles (inner card) */
.theme-dark .symptom-btn.selected {
    background: var(--button-selected-bg) !important;
    border: var(--button-selected-border) !important;
    box-shadow: none !important;
}
/* Selected symptom button hover (inner card) */
.theme-dark .symptom-btn.selected:hover,
.theme-dark .symptom-btn.selected:focus {
  background: var(--button-hover-bg) !important;
  box-shadow: none !important;
  border-color: var(--button-hover-border-color) !important;
  transform: translateY(-1px);
}
/* Selected symptom label color */
.theme-dark .symptom-btn.selected .symptom-label {
  color: var(--primary-foreground) !important; /* Use default primary fg */
}


/* ===============================================
   MULTI-THEME UTILITIES (e.g., Glow Effects)
   =============================================== */
/* These can be used for *additional* elements if needed */

/* Glow effect base utility class */
.theme-cyberpunk .glow,
.theme-synthwave .glow,
.theme-lunar .glow {
  box-shadow: var(--glow);
}

/* Glow on Specific Components (Examples) */
.theme-cyberpunk .glow-btn,
.theme-synthwave .glow-btn,
.theme-lunar .glow-btn {
  box-shadow: 0 0 6px 1px var(--glow-color), 0 0 12px 2px var(--glow-color);
  transition: box-shadow 0.2s, border-color 0.2s;
}
.theme-cyberpunk .glow-bar > rect,
.theme-synthwave .glow-bar > rect,
.theme-lunar .glow-bar > rect {
  filter: drop-shadow(0 0 6px var(--glow-color)) drop-shadow(0 0 12px var(--glow-color));
}
.theme-cyberpunk .glow-switch,
.theme-synthwave .glow-switch,
.theme-lunar .glow-switch {
  box-shadow: 0 0 6px 1px var(--glow-color), 0 0 12px 2px var(--glow-color);
  transition: box-shadow 0.2s, border-color 0.2s;
}
.theme-cyberpunk .glow-input,
.theme-synthwave .glow-input,
.theme-lunar .glow-input {
  box-shadow: 0 0 4px 1px var(--glow-color);
  transition: box-shadow 0.2s, border-color 0.2s;
  border-color: hsl(var(--primary) / 0.7);
}

/* Enhanced Glow on Interaction/Selection */
.theme-cyberpunk .glow-btn.selected, .theme-cyberpunk .glow-btn:focus, .theme-cyberpunk .glow-btn:active,
.theme-synthwave .glow-btn.selected, .theme-synthwave .glow-btn:focus, .theme-synthwave .glow-btn:active,
.theme-lunar .glow-btn.selected, .theme-lunar .glow-btn:focus, .theme-lunar .glow-btn:active {
  box-shadow: 0 0 12px 3px var(--glow-color), 0 0 20px 6px var(--glow-color);
  border-color: var(--primary);
}
.theme-cyberpunk .glow-input:focus, .theme-cyberpunk .glow-input.selected,
.theme-synthwave .glow-input:focus, .theme-synthwave .glow-input.selected,
.theme-lunar .glow-input:focus, .theme-lunar .glow-input.selected {
  box-shadow: 0 0 10px 3px var(--glow-color);
  border-color: var(--primary);
}
.theme-cyberpunk .glow-switch[data-state="checked"],
.theme-synthwave .glow-switch[data-state="checked"],
.theme-lunar .glow-switch[data-state="checked"] {
  box-shadow: 0 0 12px 3px var(--glow-color);
}

/* Chart bar and card glow for analysis page */
.theme-cyberpunk .chart-bar,
.theme-synthwave .chart-bar,
.theme-lunar .chart-bar {
  filter: drop-shadow(0 0 4px var(--primary)) drop-shadow(0 0 8px var(--glow-color));
}
.theme-cyberpunk .analysis-card,
.theme-synthwave .analysis-card,
.theme-lunar .analysis-card {
   box-shadow: 0 0 8px 1px hsl(var(--primary) / 0.5), 0 0 12px 2px var(--glow-color);
   border: 1px solid hsl(var(--primary) / 0.3);
}


/* END OF REFACTORED index.css */